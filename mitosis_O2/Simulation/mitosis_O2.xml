<CompuCell3D>

  <Potts>
    <Dimensions x="100" y="100" z="100"/>
    <Steps>10000</Steps>
    <Temperature>25</Temperature>  <!-- INCREASED for more active behavior -->
    <NeighborOrder>4</NeighborOrder>  <!-- INCREASED for smoother spherical surfaces -->
    <Boundary_x>NoFlux</Boundary_x> <!-- NoFlux boundaries for cell confinement -->
    <Boundary_y>NoFlux</Boundary_y>
    <Boundary_z>NoFlux</Boundary_z>
  </Potts>

  <Plugin Name="CellType">
    <CellType TypeName="Medium"   TypeId="0"/>
    <CellType TypeName="Normoxic" TypeId="1"/>
    <CellType TypeName="Hypoxic"  TypeId="2"/>
    <CellType TypeName="Necrotic" TypeId="3"/>
  </Plugin>

  <Plugin Name="Volume">
    <!-- Strong volume constraints to ensure cells follow target volumes -->
    <VolumeEnergyParameters CellType="Normoxic" LambdaVolume="50.0" TargetVolume="50"/>
    <VolumeEnergyParameters CellType="Hypoxic"  LambdaVolume="50.0" TargetVolume="50"/>
    <VolumeEnergyParameters CellType="Necrotic" LambdaVolume="50.0" TargetVolume="50"/>
  </Plugin>

  <Plugin Name="Surface">
    <!-- Simple surface constraints - no dynamic updates needed -->
    <SurfaceEnergyParameters CellType="Normoxic" LambdaSurface="2.0" TargetSurface="66"/>
    <SurfaceEnergyParameters CellType="Hypoxic"  LambdaSurface="2.0" TargetSurface="66"/>
    <SurfaceEnergyParameters CellType="Necrotic" LambdaSurface="2.0" TargetSurface="66"/>
  </Plugin>

  <Plugin Name="Contact">

    <Energy Type1="Medium"   Type2="Medium">0</Energy>
  <!-- Lowered Medium-Normoxic from 5 to 3 to reduce resistance to early expansion -->
  <Energy Type1="Medium"   Type2="Normoxic">3</Energy>
    <Energy Type1="Medium"   Type2="Hypoxic">7</Energy>
    <Energy Type1="Medium"   Type2="Necrotic">10</Energy>

    <Energy Type1="Normoxic" Type2="Normoxic">1</Energy>
    <Energy Type1="Hypoxic"  Type2="Hypoxic">1</Energy>
    <Energy Type1="Necrotic" Type2="Necrotic">1</Energy>

    <Energy Type1="Normoxic" Type2="Hypoxic">2</Energy>
    <Energy Type1="Normoxic" Type2="Necrotic">2</Energy>
    <Energy Type1="Hypoxic"  Type2="Necrotic">2</Energy>
  </Plugin>

  <!-- Simplified plugin set - removed unnecessary trackers -->
  <!-- <Plugin Name="NeighborTracker"/>
  <Plugin Name="CenterOfMass"/>
  <Plugin Name="PixelTracker"/> -->

  <!-- Chemotaxis not required for simple growth/division; removed for clarity -->

  <!-- Oxygen field diffusing from boundaries to center -->
  <Steppable Type="DiffusionSolverFE">
    <DiffusionField Name="Oxygen">
      <DiffusionData>
        <FieldName>Oxygen</FieldName>
        <!-- Realistic oxygen diffusion in tissue-like medium -->
        <DiffusionConstant>0.4</DiffusionConstant>
        <!-- No bulk decay - oxygen only consumed by cells -->
        <DecayConstant>0.0</DecayConstant>
        <!-- UNIFORM oxygen throughout entire domain at t=0 -->
        <InitialConcentration>1.0</InitialConcentration>
      </DiffusionData>

      <SecretionData>
        <!-- MUCH REDUCED oxygen consumption for better proliferation -->
        <Uptake Type="Normoxic" MaxUptake="0.03" RelativeUptakeRate="0.01"/>
        <Uptake Type="Hypoxic"  MaxUptake="0.075" RelativeUptakeRate="0.025"/>
        <Uptake Type="Necrotic" MaxUptake="0.0" RelativeUptakeRate="0.0"/>
      </SecretionData>

      <BoundaryConditions>
        <Plane Axis="X">
          <ConstantValue PlanePosition="Min" Value="1.0"/>
          <ConstantValue PlanePosition="Max" Value="1.0"/>
        </Plane>
        <Plane Axis="Y">
          <ConstantValue PlanePosition="Min" Value="1.0"/>
          <ConstantValue PlanePosition="Max" Value="1.0"/>
        </Plane>
        <Plane Axis="Z">
          <ConstantValue PlanePosition="Min" Value="1.0"/>
          <ConstantValue PlanePosition="Max" Value="1.0"/>
        </Plane>
      </BoundaryConditions>

    </DiffusionField>
  </Steppable>

  <!-- Streamlined parameters - essential parameters only -->
  <UserParameters>
    <!-- Growth Rates -->
    <!-- Use moderate growth so volume increases gradually instead of instant saturation -->
    <Param Name="GrowthRateNormoxic" Value="2.0" Desc="Growth increment per MCS (normoxic cells)"/>
    <Param Name="GrowthRateHypoxic" Value="0.8" Desc="Growth increment per MCS (hypoxic cells)"/>
    
    <!-- Oxygen Thresholds -->
    <Param Name="O2_Thresh_Normoxic" Value="0.75" Desc="O2 above which hypoxic reverts to normoxic"/>
    <Param Name="O2_Thresh_Hypoxic" Value="0.35" Desc="O2 below which normoxic becomes hypoxic"/>
    <Param Name="O2_Thresh_Necrotic" Value="0.03" Desc="O2 below which cell becomes necrotic"/>
    
    <!-- Division Probabilities by Phenotype -->
    <Param Name="DivProbNormoxic" Value="0.9" Desc="Division probability for normoxic cells at target volume"/>
    <Param Name="DivProbHypoxic" Value="0.2" Desc="Division probability for hypoxic cells at target volume"/>
    

    <!-- Necrotic Cell Behavior -->
    <Param Name="NecroticShrinkageRate" Value="3.5" Desc="Volume reduction rate per MCS for necrotic cells"/>
    <Param Name="NecroticLifetime" Value="150" Desc="Maximum MCS a necrotic cell exists before removal"/>
    
    <!-- Analysis and Output -->
    <Param Name="OutputFrequency" Value="10" Desc="Analysis and log print frequency (MCS)"/>
  </UserParameters>
  
  </CompuCell3D>
